app = "equity-livekit-sip"
primary_region = "lax"

[build]
  dockerfile = "Dockerfile"

[env]
  # LiveKit Core WebSocket URL (internal)
  LIVEKIT_WS_URL = "ws://equity-livekit-core.internal:7880"
  
  # Redis connection
  REDIS_ADDRESS = "fly-equity-redis.upstash.io:6379"
  
  # SIP configuration
  SIP_PORT = "5060"
  RTP_PORT_RANGE = "60000-61000"
  LOG_LEVEL = "info"

# SIP UDP (primary)
[[services]]
  internal_port = 5060
  protocol = "udp"
  [[services.ports]]
    port = 5060

# SIP TCP (fallback)
[[services]]
  internal_port = 5060
  protocol = "tcp"
  [[services.ports]]
    port = 5060

# RTP (media) UDP port range
[[services]]
  internal_port = 60000
  protocol = "udp"
  [[services.ports]]
    start_port = 60000
    end_port = 61000

