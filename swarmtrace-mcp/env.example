# SwarmTrace MCP Server Environment Configuration
# Last Updated: 2025-10-19 for Phase I (100-250 leads/broker/day)

# ============================================================
# REQUIRED: API Authentication
# ============================================================

# Required: SwarmTrace API key used for authentication when calling /skiptrace
SWARMTRACE_API_KEY=

# Required: Bearer token that n8n (or other clients) must supply when connecting to the MCP server
MCP_BEARER_TOKEN=

# ============================================================
# PERFORMANCE TUNING (Phase I: 100-250 leads/broker)
# ============================================================

# Optional: Default maximum concurrent SwarmTrace requests if the tool caller does not provide max_concurrent
# - Default: 30 (conservative, good for <50 leads)
# - Phase I Recommended: 75 (optimized for 100-250 batch sizes)
# - Maximum: 100 (hard limit in code)
# Adjust based on Swarmtrace's rate limits and your testing
MAX_CONCURRENT_REQUESTS=75

# Optional: Maximum number of retries for 429 Too Many Requests responses
# - Retries use exponential backoff (1s, 2s, 4s...)
# - Keep at 3 unless you see consistent rate limiting
RETRY_MAX_ATTEMPTS=3

# ============================================================
# DEBUGGING & DEVELOPMENT
# ============================================================

# Optional: Enable verbose debug logging (true/false)
# - Set to 'true' during initial testing/optimization
# - Set to 'false' in stable production
ENABLE_DEBUG_LOGGING=false

# Optional: Run the server in mock mode to simulate SwarmTrace responses for testing (true/false)
# - Useful for testing workflow logic without costs
# - Always 'false' in production
USE_MOCK_API=false

# ============================================================
# NETWORK CONFIGURATION
# ============================================================

# Optional: Host/port overrides
HOST=0.0.0.0
PORT=8080

# ============================================================
# SCALING NOTES
# ============================================================
#
# Current Config: Optimized for 100-250 leads/broker/day
#
# Expected Performance:
# - 100 leads: ~40-60 seconds
# - 250 leads: ~100-150 seconds
#
# If you see 429 errors (rate limiting):
# 1. Reduce MAX_CONCURRENT_REQUESTS to 50
# 2. Contact Swarmtrace support for official rate limit details
# 3. Monitor retry attempts in logs
#
# To increase throughput:
# 1. Set ENABLE_DEBUG_LOGGING=true
# 2. Monitor avg_response_time_ms in MCP response stats
# 3. Gradually increase MAX_CONCURRENT_REQUESTS (test at 50, 75, 100)
# 4. Watch for 429 errors indicating you've hit their limit
#
# Cost Tracking:
# - Check 'billable_hits' in MCP response stats
# - At $0.0125/lead: 100 leads = $1.25, 250 leads = $3.13
# - Monthly at 250/day: ~$93.75/broker
#

